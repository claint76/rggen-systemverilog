email:
  false

dist:
  trusty

git:
  depth:
    false

env:
  global:
    - secure: "KpevF4e/nKrHbEfgJWSbYH7bOfHpwbtRVaxGX/EksbQHMI3yt0K62tES1NvB1V7gyReTN4hTbiwnRNxCYbbGKgI8AWWVxj/YEO1viHlKyUMG3YL3nosvGmz0FLVFk2mLdWBiv9+tb3F6ttmIkcpAcp+CArvPpw0NRNp9GCc5HtEe6GDL4UDsmDA+su1VHtHtKm+WEwy6FfTHkPWw9Z8FmrKq2WwYgX8PthDeHit+Pgdc+gINY+ppA6BJaB2A0rOm3LERXgFcw7W+h/m8UyYzqUO5i9yrLfZwV72DLxCyFuLJxGVgx2gd4gOL8HI3l1/NveuQ0m3czFHWb9FVAT5xBvETNhnEQk8jRxICPfX2jUjGwn0UsJvBcFbqo2SrcJre2gRjItXlaszIdIHkKBSg8kOeCJloeImlo181/EqLOcesporAL5OCZp7iYgSinrtGh4v/hgD393dcG7aZJIjvCtR6Y7qT9ie1IMpMd5ohokmC98oxhL4MclOhVnw8yekVExOx9KtmKqiyDcEa8zeGqDVrDIfko0N7ACm3TB12Gy2Dlr76tOqPNmgxlsjOzsjiZrKnYWur4ExY0DJzJlI0X+EmjhrEHXWMXqlighdDjUBSKkkHH4GqRjmjWN+8EGQ85UtKwK4Ghd1JfIBxlyxxbHswwCKDPgwlDu/eo3Dfh2Y="
    - RGGEN_SAMPLE_DIRECTORY=$TRAVIS_BUILD_DIR/rggen-sample

cache:
  bundler

language:
  ruby

matrix:
  include:
    - rvm: 2.3.8
    - rvm: 2.4.9
      env: RUBYOPT=--enable-frozen-string-literal USE_FIXED_GEMS=yes
    - rvm: 2.5.7
      env: RUBYOPT=--enable-frozen-string-literal USE_FIXED_GEMS=yes
    - rvm: 2.6.5
      env: RUBYOPT=--enable-frozen-string-literal USE_FIXED_GEMS=yes
    - rvm: 2.7.0
      env: RUBYOPT=--enable-frozen-string-literal USE_FIXED_GEMS=yes

addons:
  sonarcloud:
    organization:
      rggen
    token:
      secure: "l0sTsCu2Rt7OE96/+m20X2LKqrC/tyzIwcXWtqwFfHvUW5iiZafaHp6VU5ChOemVblxcVIeJ+A8BJy1QHWDVLsf3yvW0t1ZLjI+fO+unPSXo3RUXlPGgA8ghB9Le4j5qNLr5We+fEtcNP3UwbLJAhUzzUOFO95QMnwyvSlzmm4xhqtLESVTERd85queFc0MgBChM324chaf2o8/cxVgKeZHc3wlcaMQQGIM66j70H280PfJCdFAdQKMu6ptnoc86T34GlFa7MhIQC4Pn+GDdBK418eBHZgeD7Uu79ZJI3pLUnr0tKapWxl1ncASYWGcWSGpS1amee0FGgWIjv90CuXwslPINBy2uh6exgp4RBviREjbTLFvwrkDCqIQUne4DyFXJz0iNGxeXAt7o3qepk+XKFwROjtS9b5eWuw3OUR3XS9JejVUDDymhy5aajUSUlVBH41px/R3ecTutpN71OusnDvdq4q6hWRWYYEp1a4c3qdc+ZWWiZ8gMFF79OAARWcHPrUsxYRzfCba6zLpYpyRQJGCMfpYUnG3Q+wdeKoGNDcDFqsbs7Q3zKVvfdtFGMLlnk8oO23MOFCIOmbb0lN7eQnyKD5fwCzn7PS4axL5npz9qpAtkZwIqwyoeCOWTaQDi0T9A4TRb4XQY5SeWykGxObWBHYfyFkFaOYoKfxM="

before_install:
  - "git clone https://github.com/rggen/rggen-sample.git"
  - "env -u RUBYOPT gem update --system"
  - "env -u RUBYOPT gem install bundler"

script:
  - bundle exec rake coverage
  - sonar-scanner
